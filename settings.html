<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Settings ‚Äî Star Xerox</title>
    <meta name="description" content="Configure shop profile, invoice header, tax rates, and preferences." />
    <link rel="stylesheet" href="css/style.css" />
</head>

<body>
    <aside class="sidebar" id="sidebar">
        <div class="sidebar-logo">
            <div class="logo-icon">üñ®Ô∏è</div>
            <div class="logo-text">Star Xerox<small>Business Manager</small></div>
        </div>
        <nav class="sidebar-nav">
            <div class="nav-section-label">Main</div>
            <a class="nav-item" data-page="index.html" href="index.html"><span class="nav-icon">üìä</span><span
                    class="nav-label">Dashboard</span></a>
            <a class="nav-item" data-page="orders.html" href="orders.html"><span class="nav-icon">üìã</span><span
                    class="nav-label">Orders</span></a>
            <a class="nav-item" data-page="customers.html" href="customers.html"><span class="nav-icon">üë•</span><span
                    class="nav-label">Customers</span></a>
            <div class="nav-section-label">Operations</div>
            <a class="nav-item" data-page="inventory.html" href="inventory.html"><span class="nav-icon">üì¶</span><span
                    class="nav-label">Inventory</span><span class="nav-badge" id="invBadge">0</span></a>
            <a class="nav-item" data-page="billing.html" href="billing.html"><span class="nav-icon">üßæ</span><span
                    class="nav-label">Billing</span></a>
            <div class="nav-section-label">Website</div>
            <a class="nav-item" data-page="enquiries.html" href="enquiries.html"><span class="nav-icon">üì©</span><span
                    class="nav-label">Enquiries</span><span class="nav-badge" id="enqBadge"
                    style="display:none">0</span></a>
            <a href="customer.html" target="_blank" class="nav-item"><span class="nav-icon">üåê</span><span
                    class="nav-label">View Website</span></a>
            <div class="nav-section-label">Insights</div>
            <a class="nav-item" data-page="reports.html" href="reports.html"><span class="nav-icon">üìà</span><span
                    class="nav-label">Reports</span></a>
            <a class="nav-item" data-page="settings.html" href="settings.html"><span class="nav-icon">‚öôÔ∏è</span><span
                    class="nav-label">Settings</span></a>
        </nav>
        <div class="sidebar-footer"><button class="sidebar-toggle"
                id="sidebarToggle"><span>‚ò∞</span><span>Collapse</span></button></div>
    </aside>

    <div class="main">
        <div class="topbar">
            <div class="topbar-left">
                <div>
                    <div class="topbar-title">Settings</div>
                    <div class="topbar-subtitle">Shop profile, invoice setup and preferences</div>
                </div>
            </div>
            <div class="topbar-right">
                <div class="topbar-date" id="todayDate"></div>
                <button class="btn btn-primary btn-sm" onclick="saveSettings()">üíæ Save Settings</button>
            </div>
        </div>
        <div class="page-content">
            <div class="grid-2">
                <!-- Shop Profile -->
                <div class="card">
                    <div class="section-title" style="margin-bottom:18px">üè™ Shop Profile</div>
                    <div class="form-group"><label class="form-label">Shop Name</label><input type="text"
                            class="form-control" id="settShopName" placeholder="Star Xerox"></div>
                    <div class="form-group"><label class="form-label">Owner Name</label><input type="text"
                            class="form-control" id="settOwnerName" placeholder="Rajesh Kumar"></div>
                    <div class="form-group"><label class="form-label">Phone</label><input type="text"
                            class="form-control" id="settPhone" placeholder="98XXXXXXXX"></div>
                    <div class="form-group"><label class="form-label">Email</label><input type="email"
                            class="form-control" id="settEmail" placeholder="info@shop.in"></div>
                    <div class="form-group"><label class="form-label">Address</label><textarea class="form-control"
                            id="settAddress" rows="3" placeholder="Street, City, State ‚Äî PIN"></textarea></div>
                    <div class="form-group"><label class="form-label">GST Number</label><input type="text"
                            class="form-control" id="settGst" placeholder="27AABCU9603R1ZX"></div>
                </div>

                <div style="display:flex;flex-direction:column;gap:20px">
                    <!-- Invoice & Tax Settings -->
                    <div class="card">
                        <div class="section-title" style="margin-bottom:18px">üßæ Invoice & Tax Settings</div>
                        <div class="form-row">
                            <div class="form-group"><label class="form-label">Default GST Rate (%)</label><input
                                    type="number" class="form-control" id="settTaxRate" min="0" max="100"
                                    placeholder="18"></div>
                            <div class="form-group"><label class="form-label">Currency Symbol</label><input type="text"
                                    class="form-control" id="settCurrency" placeholder="‚Çπ"></div>
                        </div>
                        <div class="form-group"><label class="form-label">Invoice Terms / Notes</label><textarea
                                class="form-control" id="settTerms" rows="3"
                                placeholder="Payment due within 30 days. Goods once sold are not returnable."></textarea>
                        </div>
                    </div>

                    <!-- Danger Zone -->
                    <div class="card" style="border-color:rgba(239,68,68,0.3)">
                        <div class="section-title" style="margin-bottom:12px;color:var(--danger)">‚ö†Ô∏è Danger Zone</div>
                        <p style="font-size:13px;color:var(--text-secondary);margin-bottom:16px">These actions are
                            irreversible. Proceed with caution.</p>
                        <div style="display:flex;gap:10px;flex-wrap:wrap">
                            <button class="btn btn-danger btn-sm" onclick="confirmReset()">üóëÔ∏è Reset All Data</button>
                            <button class="btn btn-secondary btn-sm" onclick="exportAllData()">‚¨áÔ∏è Export All Data
                                (JSON)</button>
                        </div>
                    </div>
                </div>

                <!-- Manage Services -->
                <div class="card" style="margin-top:20px;grid-column: 1 / -1;">
                    <div class="section-header">
                        <div class="section-title">üè∑Ô∏è Manage Services (Website)</div>
                        <button class="btn btn-primary btn-sm" onclick="addService()">+ Add Service</button>
                    </div>
                    <div style="overflow-x:auto;margin-top:16px">
                        <table class="table" style="width:100%">
                            <thead>
                                <tr>
                                    <th>Icon</th>
                                    <th>Service Name</th>
                                    <th>Price Tag</th>
                                    <th>Color</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="servicesTableBody">
                                <!-- injected by JS -->
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Service Modal -->
                <div class="modal-overlay" id="serviceModal">
                    <div class="modal-content" style="max-width:500px">
                        <div class="modal-header">
                            <h2 class="modal-title" id="serviceModalTitle">Add Service</h2>
                            <button class="modal-close" onclick="closeModal('serviceModal')">√ó</button>
                        </div>
                        <input type="hidden" id="serviceId">
                        <div class="form-group" style="margin-top:10px"><label class="form-label">Service
                                Name</label><input type="text" class="form-control" id="srvName"></div>
                        <div class="form-row">
                            <div class="form-group"><label class="form-label">Icon (Emoji)</label><input type="text"
                                    class="form-control" id="srvIcon" placeholder="üíº"></div>
                            <div class="form-group"><label class="form-label">Color (Hex)</label><input type="color"
                                    class="form-control" id="srvColor" value="#3b82f6" style="height:42px;padding:4px">
                            </div>
                        </div>
                        <div class="form-group"><label class="form-label">Price Tag</label><input type="text"
                                class="form-control" id="srvPrice" placeholder="From ‚Çπ500/250 cards"></div>
                        <div class="form-group"><label class="form-label">Description</label><textarea
                                class="form-control" id="srvDesc" rows="3"></textarea></div>
                        <div style="display:flex;justify-content:flex-end;gap:10px;margin-top:20px">
                            <button class="btn btn-secondary" onclick="closeModal('serviceModal')">Cancel</button>
                            <button class="btn btn-primary" onclick="saveServiceBtn()">Save Service</button>
                        </div>
                    </div>
                </div>


                <!-- Manage Portfolio -->
                <div class="card" style="margin-top:20px;grid-column: 1 / -1;">
                    <div class="section-header">
                        <div class="section-title">üñºÔ∏è Manage Portfolio (Demo Works)</div>
                        <button class="btn btn-primary btn-sm" onclick="addPortfolio()">+ Add Item</button>
                    </div>
                    <div style="overflow-x:auto;margin-top:16px">
                        <table class="table" style="width:100%">
                            <thead>
                                <tr>
                                    <th>Preview</th>
                                    <th>Title</th>
                                    <th>Colors</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="portfolioTableBody">
                                <!-- injected by JS -->
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Portfolio Modal -->
                <div class="modal-overlay" id="portfolioModal">
                    <div class="modal-content" style="max-width:400px">
                        <div class="modal-header">
                            <h2 class="modal-title" id="portfolioModalTitle">Add Portfolio Item</h2>
                            <button class="modal-close" onclick="closeModal('portfolioModal')">√ó</button>
                        </div>
                        <input type="hidden" id="portId">
                        <div class="form-group" style="margin-top:10px"><label class="form-label">Project
                                Title</label><input type="text" class="form-control" id="portTitle"
                                placeholder="e.g. Corporate Mugs"></div>
                        <div class="form-group"><label class="form-label">Icon (Emoji)</label><input type="text"
                                class="form-control" id="portIcon" placeholder="‚òï"></div>
                        <div class="form-row">
                            <div class="form-group"><label class="form-label">Gradient Color 1 (Hex)</label><input
                                    type="color" class="form-control" id="portColor1" value="#ea580c"
                                    style="height:42px;padding:4px"></div>
                            <div class="form-group"><label class="form-label">Gradient Color 2 (Hex)</label><input
                                    type="color" class="form-control" id="portColor2" value="#9a3412"
                                    style="height:42px;padding:4px"></div>
                        </div>
                        <div style="display:flex;justify-content:flex-end;gap:10px;margin-top:20px">
                            <button class="btn btn-secondary" onclick="closeModal('portfolioModal')">Cancel</button>
                            <button class="btn btn-primary" onclick="savePortfolioBtn()">Save Item</button>
                        </div>
                    </div>
                </div>

                <!-- Invoice Preview -->
                <div class="card" style="margin-top:20px">
                    <div class="section-header">
                        <div class="section-title">Invoice Header Preview</div>
                        <button class="btn btn-secondary btn-sm" onclick="updatePreview()">üîÑ Refresh Preview</button>
                    </div>
                    <div class="invoice-preview" id="settInvoicePreview" style="margin-top:16px">
                        <!-- injected by JS -->
                    </div>
                </div>
            </div>
        </div>

        <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
        <script src="js/supabase-config.js"></script>
        <script src="js/app.js"></script>
        <script src="js/settings.js"></script>
</body>

</html>